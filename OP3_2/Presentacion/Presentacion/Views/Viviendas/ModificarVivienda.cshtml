@model IEnumerable<Dominio.Models.Vivienda>

@{
    ViewBag.Title = "Modificar Vivienda";
}

<br />
<br />

<div class="container">
    <h3>Ingrese ID de la Vivienda:</h3>
    <br />
    @*<select id="BuscarPor">
        <option value="Id">ID</option>
    </select>*@
    @Html.TextBox("Buscar")<input type="submit" id="SearchBtn" value="Buscar" />
    <br />
    <br />
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Id)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Estado)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Calle)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Numero)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Descripcion)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Banios)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Dormitorios)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Metraje)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Anio)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.PrecioFinal)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Contribucion)
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody id="DataSearching">
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Id)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Estado)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Calle)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Numero)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Barrio.Nombre)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Descripcion)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Banios)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Dormitorios)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Metraje)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Anio)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.PrecioFinal)
                    </td>
                    <td>
                        @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                        @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                        @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                    </td>
                </tr>
            }


            @*@foreach (var Item in Model)
            {
                <tr>
                    <td>@Item.Id</td>
                    <td>@Item.Estado</td>
                    <th>@Item.Calle</th>
                    <th>@Item.Numero</th>
                    <th>@Item..Nombre</th>
                    <th>@Html.DisplayFor(modelItem => item.Bar.Nombre)</th>
                    <th>@Item.Descripcion</th>
                    <th>@Item.Banios</th>
                    <th>@Item.Dormitorios</th>
                    <th>@Item.Metraje</th>
                    <th>@Item.Anio</th>
                    <th>@Item.PrecioFinal</th>
                    <th>@Html.ActionLink("Edit", "Edit", new { id = Item.Id })</th>
                </tr>
            }*@
        </tbody>
    </table>

</div>
<script src="~/scripts/jquery-1.10.2.min.js"></script>
<script>
    $(document).ready(function () {
        $("#SearchBtn").click(function () {
            var BuscarPor = "Id";//$("#BuscarPor").val();
            var SearchValue = $("#Buscar").val();
            var SetData = $("#DataSearching");
            SetData.html("");
            $.ajax({
                type: "post",
                url: "/Viviendas/ModificarViviendaData?BuscarPor=" + BuscarPor + "&SearchValue=" + SearchValue,
                contentType: "html",
                success: function (result) {
                    if (result[0] != null) { //result.length >= 1
                        $.each(result, function (index, value) {
                            var Data = "<tr>" +
                                "<td>" + value.Id + "</td>" +
                                "<td>" + value.Estado + "</td>" +
                                "<td>" + value.Calle + "</td>" +
                                "<td>" + value.Numero + "</td>" +
                                "<td>" + value.Barrio.Nombre + "</td>" +
                                "<td>" + value.Descripcion + "</td>" +
                                "<td>" + value.Banios + "</td>" +
                                "<td>" + value.Dormitorios + "</td>" +
                                "<td>" + value.Metraje + "</td>" +
                                "<td>" + value.Anio + "</td>" +
                                "<td>" + value.PrecioFinal + "</td>" +
                                "<td><a href='/Viviendas/Edit/" + value.Id +"'>Edit </a></td>" +                                
                            "</tr>";
                            SetData.append(Data);
                        })
                    }
                    else {
                        SetData.append('<tr style="color:red"><td>No Data</td></tr>')
                        
                    }
                }
            });
        });
    });
</script>








